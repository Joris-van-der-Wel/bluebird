/*
 The MIT License (MIT)

 Copyright (c) 2014 Petka Antonov

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:</p>

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.

*/
!function(C){"object"==typeof exports?module.exports=C():"function"==typeof define&&define.amd?define(C):"undefined"!=typeof window?window.Promise=C():"undefined"!=typeof global?global.Promise=C():"undefined"!=typeof self&&(self.Promise=C())}(function(){return function c(n,q,a){function l(f,g){if(!q[f]){if(!n[f]){var k="function"==typeof require&&require;if(!g&&k)return k(f,!0);if(m)return m(f,!0);throw Error("Cannot find module '"+f+"'");}k=q[f]={exports:{}};n[f][0].call(k.exports,function(a){var k=
n[f][1][a];return l(k?k:a)},k,k.exports,c,n,q,a)}return q[f].exports}for(var m="function"==typeof require&&require,f=0;f<a.length;f++)l(a[f]);return l}({1:[function(c,n,q){n.exports=function(a){function c(a){a=new m(a);var l=a.promise();if(l.isRejected())return l;a.setHowMany(1);a.setUnwrap();a.init();return l}var m=a._SomePromiseArray;a.any=function(a){return c(a)};a.prototype.any=function(){return c(this)}}},{}],2:[function(c,n,q){function a(){this._isTickUsed=!1;this._schedule=l;this._lateBuffer=
new m(16);this._functionBuffer=new m(65536);var a=this;this.consumeFunctionBuffer=function(){a._consumeFunctionBuffer()}}q=Error();var l=c("./schedule.js"),m=c("./queue.js"),f=c("./util.js").errorObj,p=c("./util.js").tryCatch1,g="undefined"!==typeof process?process:void 0;a.prototype.haveItemsQueued=function(){return 0<this._functionBuffer.length()};a.prototype.invokeLater=function(a,d,b){void 0===g||null==g.domain||a.domain||(a=g.domain.bind(a));this._lateBuffer.push(a,d,b);this._queueTick()};a.prototype._withDomain=
function(a){void 0===g||null==g.domain||a.domain||(a=g.domain.bind(a));return a};a.prototype.invokeFirst=function(a,d,b){a=this._withDomain(a);this._functionBuffer.unshift(a,d,b);this._queueTick()};a.prototype.invoke=function(a,d,b){a=this._withDomain(a);this._functionBuffer.push(a,d,b);this._queueTick()};a.prototype._consumeFunctionBuffer=function(){for(var a=this._functionBuffer;0<a.length();){var d=a.shift(),b=a.shift(),f=a.shift();d.call(b,f)}this._reset();this._consumeLateBuffer()};a.prototype._consumeLateBuffer=
function(){for(var a=this._lateBuffer;0<a.length();){var d=a.shift(),b=a.shift(),u=a.shift(),b=p(d,b,u);if(b===f)if(this._queueTick(),null!=d.domain)d.domain.emit("error",b.e);else throw b.e;}};a.prototype._queueTick=function(){this._isTickUsed||(this._schedule(this.consumeFunctionBuffer),this._isTickUsed=!0)};a.prototype._reset=function(){this._isTickUsed=!1};n.exports=new a;n.exports.firstLineError=q},{"./queue.js":25,"./schedule.js":28,"./util.js":35}],3:[function(c,n,q){var a;"undefined"!==typeof Promise&&
(a=Promise);n.exports=c("./promise.js")();n.exports.noConflict=function(c){try{Promise===c&&(Promise=a)}catch(m){}return c}},{"./promise.js":20}],4:[function(c,n,q){if(q=Object.create){var a=q(null),l=q(null);a[" size"]=l[" size"]=0}n.exports=function(m){function f(a){return new Function("obj","                                             \n        'use strict'                                                         \n        var len = this.length;                                               \n        switch(len) {                                                        \n            case 1: return obj.methodName(this[0]);                          \n            case 2: return obj.methodName(this[0], this[1]);                 \n            case 3: return obj.methodName(this[0], this[1], this[2]);        \n            case 0: return obj.methodName();                                 \n            default: return obj.methodName.apply(obj, this);                 \n        }                                                                    \n        ".replace(/methodName/g,
a))}function p(a){return new Function("obj","                                             \n        'use strict';                                                        \n        return obj.propertyName;                                             \n        ".replace("propertyName",a))}function g(a,h,r){var k=r[a];if("function"!==typeof k){if(!t(a))return null;k=h(a);r[a]=k;r[" size"]++;if(512<r[" size"]){a=Object.keys(r);for(h=0;256>h;++h)delete r[a[h]];r[" size"]=a.length-256}}return k}function k(a){return a[this.pop()].apply(a,
this)}function d(a){return a[this]}function b(a){return a[this]}var u=c("./util.js"),e=u.canEvaluate,t=u.isIdentifier;m.prototype.call=function(t){for(var h=arguments.length,r=Array(h-1),b=1;b<h;++b)r[b-1]=arguments[b];if(e&&(h=g(t,f,a),null!==h))return this._then(h,void 0,void 0,r,void 0);r.push(t);return this._then(k,void 0,void 0,r,void 0)};m.prototype.get=function(a){var h;"number"!==typeof a?e?(h=g(a,p,l),h=null!==h?h:d):h=d:h=b;return this._then(h,void 0,void 0,a,void 0)}}},{"./util.js":35}],
5:[function(c,n,q){n.exports=function(a,l){var m=c("./errors.js"),f=m.canAttachTrace,p=c("./async.js"),g=m.CancellationError;a.prototype._cancel=function(a){if(!this.isCancellable())return this;for(var d,b=this;void 0!==(d=b._cancellationParent)&&d.isCancellable();)b=d;this._unsetCancellable();b._attachExtraTrace(a);b._rejectUnchecked(a)};a.prototype.cancel=function(a){if(!this.isCancellable())return this;a=void 0!==a?f(a)?a:Error(a+""):new g;p.invokeLater(this._cancel,this,a);return this};a.prototype.cancellable=
function(){if(this._cancellable())return this;this._setCancellable();this._cancellationParent=void 0;return this};a.prototype.uncancellable=function(){var k=new a(l);k._propagateFrom(this,6);k._follow(this);k._unsetCancellable();return k};a.prototype.fork=function(a,d,b){a=this._then(a,d,b,void 0,void 0);a._setCancellable();a._cancellationParent=void 0;return a}}},{"./async.js":2,"./errors.js":10}],6:[function(c,n,q){n.exports=function(){function a(a){var b;if("function"===typeof a)b="[function "+
(a.name||"anonymous")+"]";else{b=a.toString();if(/\[object [a-zA-Z0-9$_]+\]/.test(b))try{b=JSON.stringify(a)}catch(h){}0===b.length&&(b="(empty array)")}a=41>b.length?b:b.substr(0,38)+"...";return"(<"+a+">, no stack trace)"}function l(a,b){this.captureStackTrace(l,b)}function m(a,b){if("object"===typeof console){var h;h="object"===typeof a||"function"===typeof a?b+d(a.stack,a):b+String(a);"function"===typeof console.warn||"object"===typeof console.warn?console.warn(h):"function"!==typeof console.log&&
"object"!==typeof console.log||console.log(h)}}function f(a){if(a=a.match(u))return{fileName:a[1],line:parseInt(a[2],10)}}var p=c("./util.js").inherits,g=c("./es5.js").defineProperty,k=null,d=null;p(l,Error);l.prototype.captureStackTrace=function(a,b){e(this,a,b)};l.unhandledRejection=function(a){m(a,"^--- With additional stack trace: ")};l.possiblyUnhandledRejection=function(a){m(a,"Possibly unhandled ")};l.combine=function(a,d){for(var h=a.length-1,r=a[h],e=-1,f=d.length-1;0<=f;--f)if(d[f]===r){e=
f;break}for(f=e;0<=f;--f)if(a[h]===d[f])a.pop(),h--;else break;a.push("From previous event:");h=a.concat(d);r=[];f=0;for(e=h.length;f<e;++f)k.test(h[f])&&b(h[f])||0<f&&!k.test(h[f])&&"From previous event:"!==h[f]||r.push(h[f]);return r};l.protectErrorMessageNewlines=function(a){for(var b=0;b<a.length&&!k.test(a[b]);++b);if(!(1>=b)){for(var h=[],r=0;r<b;++r)h.push(a.shift());a.unshift(h.join("\u0002\x00\u0001"))}};l.isSupported=function(){return"function"===typeof e};var b=function(){return!1},u=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;
l.setBounds=function(a,d){if(l.isSupported()){for(var h=a.stack.split("\n"),r=d.stack.split("\n"),k=-1,e=-1,u,c,g=0;g<h.length;++g){var m=f(h[g]);if(m){u=m.fileName;k=m.line;break}}for(g=0;g<r.length;++g)if(m=f(r[g])){c=m.fileName;e=m.line;break}0>k||0>e||!u||!c||u!==c||k>=e||(b=function(a){return(a=f(a))&&a.fileName===u&&k<=a.line&&a.line<=e?!0:!1})}};var e=function v(){if("number"===typeof Error.stackTraceLimit&&"function"===typeof Error.captureStackTrace){k=/^\s*at\s*/;d=function(h,b){return"string"===
typeof h?h:void 0!==b.name&&void 0!==b.message?b.name+". "+b.message:a(b)};var h=Error.captureStackTrace,r=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo)/;b=function(a){return r.test(a)};return function(a,b){h(a,b)}}var f=Error();if("string"===typeof f.stack&&"function"===typeof"".startsWith&&f.stack.startsWith("stackDetection@")&&"stackDetection"===v.name){g(Error,"stackTraceLimit",{writable:!0,enumerable:!1,configurable:!1,value:25});k=/@/;var e=/[@\n]/;d=function(h,b){return"string"===typeof h?
b.name+". "+b.message+"\n"+h:void 0!==b.name&&void 0!==b.message?b.name+". "+b.message:a(b)};return function(a){for(var h=Error().stack.split(e),b=h.length,r="",d=0;d<b;d+=2)r+=h[d],r+="@",r+=h[d+1],r+="\n";a.stack=r}}d=function(h,b){return"string"===typeof h?h:"object"!==typeof b&&"function"!==typeof b||void 0===b.name||void 0===b.message?a(b):b.name+". "+b.message};return null}();return l}},{"./es5.js":12,"./util.js":35}],7:[function(c,n,q){n.exports=function(a){function l(a,d,f){this._instances=
a;this._callback=d;this._promise=f}var m=c("./util.js"),f=c("./errors.js"),p=m.tryCatch1,g=m.errorObj,k=c("./es5.js").keys,d=f.TypeError;l.prototype.doFilter=function(b){for(var u=this._callback,e=this._promise._boundTo,t=0,c=this._instances.length;t<c;++t){var h=this._instances[t],r=h===Error||null!=h&&h.prototype instanceof Error;if(r&&b instanceof h)return b=p(u,e,b),b===g?(a.e=b.e,a):b;if("function"===typeof h&&!r)if(r={},h=p(h,r,b),h!==g&&k(r).length&&(g.e=new d("Catch filter must inherit from Error or be a simple predicate function"),
h=g),h===g){b=f.canAttachTrace(g.e)?g.e:Error(g.e+"");this._promise._attachExtraTrace(b);b=g.e;break}else if(h)return b=p(u,e,b),b===g?(a.e=b.e,a):b}a.e=b;return a};return l}},{"./errors.js":10,"./es5.js":12,"./util.js":35}],8:[function(c,n,q){c=c("./util.js");var a=c.isPrimitive,l=c.wrapsPrimitiveReceiver;n.exports=function(c){var f=function(){return this},p=function(){throw this;},g=function(a,d){if(1===d)return function(){throw a;};if(2===d)return function(){return a}};c.prototype["return"]=c.prototype.thenReturn=
function(k){return l&&a(k)?this._then(g(k,2),void 0,void 0,void 0,void 0):this._then(f,void 0,void 0,k,void 0)};c.prototype["throw"]=c.prototype.thenThrow=function(f){return l&&a(f)?this._then(g(f,1),void 0,void 0,void 0,void 0):this._then(p,void 0,void 0,f,void 0)}}},{"./util.js":35}],9:[function(c,n,q){n.exports=function(a,c){var m=a.reduce;a.prototype.each=function(a){return m(this,a,null,c)};a.each=function(a,p){return m(a,p,null,c)}}},{}],10:[function(c,n,q){function a(a,b){function d(f){if(!(this instanceof
d))return new d(f);p(this,"message","string"===typeof f?f:b);p(this,"name",a);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}f(d,Error);return d}function l(a){p(this,"name","OperationalError");p(this,"message",a);this.cause=a;this.isOperational=!0;a instanceof Error?(p(this,"message",a.message),p(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}q=c("./es5.js").freeze;var m=c("./es5.js").propertyIsWritable;c=c("./util.js");var f=
c.inherits,p=c.notEnumerableProp,g,k;c=a("CancellationError","cancellation error");var d=a("TimeoutError","timeout error"),b=a("AggregateError","aggregate error");try{g=TypeError,k=RangeError}catch(u){g=a("TypeError","type error"),k=a("RangeError","range error")}for(var e="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),t=0;t<e.length;++t)"function"===typeof Array.prototype[e[t]]&&(b.prototype[e[t]]=Array.prototype[e[t]]);
b.prototype.length=0;b.prototype.isOperational=!0;var v=0;b.prototype.toString=function(){var a=Array(4*v+1).join(" "),b="\n"+a+"AggregateError of:\n";v++;for(var a=Array(4*v+1).join(" "),d=0;d<this.length;++d){for(var f=this[d]===this?"[Circular AggregateError]":this[d]+"",f=f.split("\n"),e=0;e<f.length;++e)f[e]=a+f[e];f=f.join("\n");b+=f+"\n"}v--;return b};f(l,Error);e=Error.__BluebirdErrorTypes__;e||(e=q({CancellationError:c,TimeoutError:d,OperationalError:l,RejectionError:l,AggregateError:b}),
p(Error,"__BluebirdErrorTypes__",e));n.exports={Error:Error,TypeError:g,RangeError:k,CancellationError:e.CancellationError,OperationalError:e.OperationalError,TimeoutError:e.TimeoutError,AggregateError:e.AggregateError,originatesFromRejection:function(a){return null==a?!1:a instanceof l||!0===a.isOperational},markAsOriginatingFromRejection:function(a){try{p(a,"isOperational",!0)}catch(b){}},canAttachTrace:function(a){return a instanceof Error&&m(a,"stack")}}},{"./es5.js":12,"./util.js":35}],11:[function(c,
n,q){n.exports=function(a){var l=c("./errors.js").TypeError;return function(c){c=new l(c);var f=a.rejected(c),p=f._peekContext();null!=p&&p._attachExtraTrace(c);return f}}},{"./errors.js":10}],12:[function(c,n,q){if(c=function(){return void 0===this}())n.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,keys:Object.keys,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:c,propertyIsWritable:function(a,c){var g=Object.getOwnPropertyDescriptor(a,c);return!(g&&!g.writable&&
!g.set)}};else{var a={}.hasOwnProperty,l={}.toString,m={}.constructor.prototype;n.exports={isArray:function(a){try{return"[object Array]"===l.call(a)}catch(c){return!1}},keys:function(f){var c=[],g;for(g in f)a.call(f,g)&&c.push(g);return c},defineProperty:function(a,c,g){a[c]=g.value;return a},freeze:function(a){return a},getPrototypeOf:function(a){try{return Object(a).constructor.prototype}catch(c){return m}},isES5:c,propertyIsWritable:function(){return!0}}}},{}],13:[function(c,n,q){n.exports=function(a,
c){var m=a.map;a.prototype.filter=function(a,p){return m(this,a,p,c)};a.filter=function(a,p,g){return m(a,p,g,c)}}},{}],14:[function(c,n,q){n.exports=function(a,l,m){function f(){return this}function p(){throw this;}function g(a){return function(){return a}}function k(a){return function(){throw a;}}function d(a,b,d){d=t&&v(b)?d?g(b):k(b):d?f:p;return a._then(d,h,void 0,b,void 0)}function b(h){var b=this.promise,e=this.handler,e=b._isBound()?e.call(b._boundTo):e();return void 0!==e&&(e=m(e,void 0),
e instanceof a)?d(e,h,b.isFulfilled()):b.isRejected()?(l.e=h,l):h}function u(h){var b=this.promise,e=this.handler,b=b._isBound()?e.call(b._boundTo,h):e(h);return void 0!==b&&(b=m(b,void 0),b instanceof a)?d(b,h,!0):h}var e=c("./util.js"),t=e.wrapsPrimitiveReceiver,v=e.isPrimitive,h=e.thrower;a.prototype._passThroughHandler=function(a,h){return"function"!==typeof a?this.then():this._then(h?b:u,h?b:void 0,void 0,{promise:this,handler:a},void 0)};a.prototype.lastly=a.prototype["finally"]=function(a){return this._passThroughHandler(a,
!0)};a.prototype.tap=function(a){return this._passThroughHandler(a,!1)}}},{"./util.js":35}],15:[function(c,n,q){n.exports=function(a,l,m,f){function p(h,b){for(var d=e,k=b.length,c=0;c<k;++c){var u=t(b[c],void 0,h);if(u===d)return a.reject(d.e);u=f(u,p);if(u instanceof a)return u}return null}function g(b,d,e){(this._promise=new a(m))._setTrace(void 0);this._generatorFunction=b;this._receiver=d;this._generator=void 0;this._yieldHandlers="function"===typeof e?[e].concat(v):v}var k=c("./errors.js"),
d=k.TypeError,b=c("./util.js").deprecated,u=c("./util.js"),e=u.errorObj,t=u.tryCatch1,v=[];g.prototype.promise=function(){return this._promise};g.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);this._receiver=this._generatorFunction=void 0;this._next(void 0)};g.prototype._continue=function(b){if(b===e){this._generator=void 0;var r=k.canAttachTrace(b.e)?b.e:Error(b.e+"");this._promise._attachExtraTrace(r);this._promise._reject(b.e,r)}else if(r=b.value,!0===b.done)this._generator=
void 0,this._promise._tryFollow(r)||this._promise._fulfill(r);else{b=f(r,void 0);if(!(b instanceof a)&&(b=p(b,this._yieldHandlers),null===b)){this._throw(new d("A value was yielded that could not be treated as a promise"));return}b._then(this._next,this._throw,void 0,this,null)}};g.prototype._throw=function(a){k.canAttachTrace(a)&&this._promise._attachExtraTrace(a);this._continue(t(this._generator["throw"],this._generator,a))};g.prototype._next=function(a){this._continue(t(this._generator.next,this._generator,
a))};a.coroutine=function(a,b){if("function"!==typeof a)throw new d("generatorFunction must be a function");var e=Object(b).yieldHandler;return function(){var b=a.apply(this,arguments),d=new g(void 0,void 0,e);d._generator=b;d._next(void 0);return d.promise()}};a.coroutine.addYieldHandler=function(a){if("function"!==typeof a)throw new d("fn must be a function");v.push(a)};a.spawn=function(h){b("Promise.spawn is deprecated. Use Promise.coroutine instead.");if("function"!==typeof h)return l("generatorFunction must be a function");
h=new g(h,this);var d=h.promise();h._run(a.spawn);return d}}},{"./errors.js":10,"./util.js":35}],16:[function(c,n,q){n.exports=function(a,l,m,f){function p(a){this._reject(a)}var g=c("./util.js"),k=g.canEvaluate,d=g.tryCatch1,b=g.errorObj;if(k){for(var g=function(a){for(var b=[],d=1;d<=a;++d)b.push("holder.p"+d);return new Function("holder","                                      \n            'use strict';                                                    \n            var callback = holder.fn;                                        \n            return callback(values);                                         \n            ".replace(/values/g,
b.join(", ")))},u=[],e=[void 0],t=1;5>=t;++t)u.push(new Function("value","holder","                             \n            'use strict';                                                    \n            holder.pIndex = value;                                           \n            holder.checkFulfillment(this);                                   \n            ".replace(/Index/g,t))),e.push(g(t));var v=function(a,b){this.p1=this.p2=this.p3=this.p4=this.p5=null;this.fn=b;this.total=a;this.now=0};v.prototype.callers=
e;v.prototype.checkFulfillment=function(a){var e=this.now;e++;var f=this.total;e>=f?(e=d(this.callers[f],void 0,this),e===b?a._rejectUnchecked(e.e):a._tryFollow(e)||a._fulfillUnchecked(e)):this.now=e}}a.join=function(){var b=arguments.length-1,d;if(0<b&&"function"===typeof arguments[b]&&(d=arguments[b],6>b&&k)){var e=new a(f);e._setTrace(void 0);d=new v(b,d);for(var c=u,t=0;t<b;++t){var g=m(arguments[t],void 0);g instanceof a?g.isPending()?g._then(c[t],p,void 0,e,d):g.isFulfilled()?c[t].call(e,g._settledValue,
d):(e._reject(g._settledValue),g._unsetRejectionIsUnhandled()):c[t].call(e,g,d)}return e}b=arguments.length;e=Array(b);for(c=0;c<b;++c)e[c]=arguments[c];e=(new l(e)).promise();return void 0!==d?e.spread(d):e}}},{"./util.js":35}],17:[function(c,n,q){n.exports=function(a,l,m,f,p){function g(a,b,d,e){this.constructor$(a);this._callback=b;this._preservedValues=e===p?Array(this.length()):null;this._limit=d;this._inFlight=0;this._queue=1<=d?[]:t;this._init$(void 0,-2)}function k(a,b,d,e){d="object"===typeof d&&
null!==d?d.concurrency:0;d="number"===typeof d&&isFinite(d)&&1<=d?d:0;return new g(a,b,d,e)}var d=c("./util.js"),b=d.tryCatch3,u=d.errorObj,e={},t=[];d.inherits(g,l);g.prototype._init=function(){};g.prototype._promiseFulfilled=function(d,h){var c=this._values;if(null!==c){var k=this.length(),t=this._preservedValues,g=this._limit;if(c[h]===e){if(c[h]=d,1<=g&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(1<=g&&this._inFlight>=g){c[h]=d;this._queue.push(h);return}null!==t&&
(t[h]=d);var m=b(this._callback,this._promise._boundTo,d,h,k);if(m===u)return this._reject(m.e);var l=f(m,void 0);if(l instanceof a){if(l.isPending())return 1<=g&&this._inFlight++,c[h]=e,l._proxyPromiseArray(this,h);if(l.isFulfilled())m=l._settledValue;else return l._unsetRejectionIsUnhandled(),this._reject(l._settledValue)}c[h]=m}++this._totalResolved>=k&&(null!==t?this._filter(c,t):this._resolve(c))}};g.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,d=this._values;0<a.length&&
this._inFlight<b;){var e=a.pop();this._promiseFulfilled(d[e],e)}};g.prototype._filter=function(a,b){for(var d=b.length,e=Array(d),c=0,f=0;f<d;++f)a[f]&&(e[c++]=b[f]);e.length=c;this._resolve(e)};g.prototype.preservedValues=function(){return this._preservedValues};a.prototype.map=function(a,b){return"function"!==typeof a?m("fn must be a function"):k(this,a,b,null).promise()};a.map=function(a,b,d,e){return"function"!==typeof b?m("fn must be a function"):k(a,b,d,e).promise()}}},{"./util.js":35}],18:[function(c,
n,q){n.exports=function(a){function l(a){throw a;}function m(a,b){if(!g.isArray(a))return f(a,b);var d=g.tryCatchApply(this,[null].concat(a),b);d===u&&k.invokeLater(l,void 0,d.e)}function f(a,c){var f=void 0===a?b(this,c,null):d(this,c,null,a);f===u&&k.invokeLater(l,void 0,f.e)}function p(a,d){var c=b(this,d,a);c===u&&k.invokeLater(l,void 0,c.e)}var g=c("./util.js"),k=c("./async.js"),d=g.tryCatch2,b=g.tryCatch1,u=g.errorObj;a.prototype.nodeify=function(a,b){if("function"==typeof a){var d=f;void 0!==
b&&Object(b).spread&&(d=m);this._then(d,p,void 0,a,this._boundTo)}return this}}},{"./async.js":2,"./util.js":35}],19:[function(c,n,q){n.exports=function(a,l){var m=c("./util.js"),f=c("./async.js"),p=c("./errors.js"),g=m.tryCatch1,k=m.errorObj;a.prototype.progressed=function(a){return this._then(void 0,void 0,a,void 0,void 0)};a.prototype._progress=function(a){this._isFollowingOrFulfilledOrRejected()||this._progressUnchecked(a)};a.prototype._progressHandlerAt=function(a){return 0===a?this._progressHandler0:
this[(a<<2)+a-5+2]};a.prototype._doProgressWith=function(d){var b=d.promise;d=g(d.handler,d.receiver,d.value);if(d===k){if(null!=d.e&&"StopProgressPropagation"!==d.e.name){var c=p.canAttachTrace(d.e)?d.e:Error(d.e+"");b._attachExtraTrace(c);b._progress(d.e)}}else d instanceof a?d._then(b._progress,null,null,b,void 0):b._progress(d)};a.prototype._progressUnchecked=function(d){if(this.isPending())for(var b=this._length(),c=this._progress,e=0;e<b;e++){var k=this._progressHandlerAt(e),g=this._promiseAt(e);
if(g instanceof a)"function"===typeof k?f.invoke(this._doProgressWith,this,{handler:k,promise:g,receiver:this._receiverAt(e),value:d}):f.invoke(c,g,d);else{var h=this._receiverAt(e);"function"===typeof k?k.call(h,d,g):h instanceof a&&h._isProxied()?h._progressUnchecked(d):h instanceof l&&h._promiseProgressed(d,g)}}}}},{"./async.js":2,"./errors.js":10,"./util.js":35}],20:[function(c,n,q){n.exports=function(){function a(b){if("function"!==typeof b)throw new w("the promise constructor requires a resolver function");
if(this.constructor!==a)throw new w("the promise constructor cannot be invoked directly");this._bitField=0;this._boundTo=this._settledValue=this._receiver0=this._promise0=this._progressHandler0=this._rejectionHandler0=this._fulfillmentHandler0=void 0;b!==d&&this._resolveFromResolver(b)}var l=function(){return new w("circular promise resolution chain")},m=function(){return new a.PromiseInspection(this)},f=function(a){return a[0]},p=c("./util.js"),g=c("./async.js"),k=c("./errors.js"),d=function(){},
b={},u={e:null},e=c("./thenables.js")(a,d),t=c("./promise_array.js")(a,d,e),v=c("./captured_trace.js")(),h=c("./catch_filter.js")(u),r=c("./promise_resolver.js"),n=p.isArray,q=p.errorObj,y=p.tryCatch1,G=p.tryCatch2,E=p.tryCatchApply,J=k.RangeError,w=k.TypeError,z=k.CancellationError,K=k.TimeoutError,H=k.OperationalError,L=k.originatesFromRejection,I=k.markAsOriginatingFromRejection,A=k.canAttachTrace,B=c("./errors_api_rejection")(a),F,x=!("undefined"===typeof process||"string"!==typeof process.execPath||
"object"!==typeof process.env||!process.env.BLUEBIRD_DEBUG&&"development"!==process.env.NODE_ENV);a.prototype.bind=function(b){var c=e(b,void 0),h=new a(d);c instanceof a?(b=c.then(function(a){h._setBoundTo(a)}),b=a.all([this,b]).then(f),h._follow(b)):(h._follow(this),h._setBoundTo(b));h._propagateFrom(this,3);return h};a.prototype.toString=function(){return"[object Promise]"};a.prototype.caught=a.prototype["catch"]=function(b){var d=arguments.length;if(1<d){var e=Array(d-1),c=0,f;for(f=0;f<d-1;++f){var k=
arguments[f];if("function"===typeof k)e[c++]=k;else return d=new w("A catch filter must be an error constructor or a filter function"),this._attachExtraTrace(d),a.reject(d)}e.length=c;b=arguments[f];this._resetTrace();d=new h(e,b,this);return this._then(void 0,d.doFilter,void 0,d,void 0)}return this._then(void 0,b,void 0,void 0,void 0)};a.prototype.reflect=function(){return this._then(m,m,void 0,this,void 0)};a.prototype.then=function(a,b,d){return this._then(a,b,d,void 0,void 0)};a.prototype.done=
function(a,b,d){this._then(a,b,d,void 0,void 0)._setIsFinal()};a.prototype.spread=function(a,d){return this._then(a,d,void 0,b,void 0)};a.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()};a.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};this.isFulfilled()?(a.fulfillmentValue=this._settledValue,a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this._settledValue,a.isRejected=!0);return a};a.prototype.all=
function(){return(new t(this)).promise()};a.prototype.error=function(a){return this.caught(L,a)};a.is=function(b){return b instanceof a};a.all=function(a){return(new t(a)).promise()};a.method=function(b){if("function"!==typeof b)throw new w("fn must be a function");return function(){var e;switch(arguments.length){case 0:e=y(b,this,void 0);break;case 1:e=y(b,this,arguments[0]);break;case 2:e=G(b,this,arguments[0],arguments[1]);break;default:e=arguments.length;for(var c=Array(e),h=0;h<e;++h)c[h]=arguments[h];
e=E(b,c,this)}c=new a(d);c._setTrace(void 0);c._resolveFromSyncValue(e);return c}};a.attempt=a["try"]=function(b,e,c){if("function"!==typeof b)return B("fn must be a function");b=n(e)?E(b,e,c):y(b,c,e);e=new a(d);e._setTrace(void 0);e._resolveFromSyncValue(b);return e};a.defer=a.pending=function(){var b=new a(d);b._setTrace(void 0);return new r(b)};a.bind=function(b){var c=e(b,void 0),h=new a(d);h._setTrace(void 0);c instanceof a?(b=c.then(function(a){h._setBoundTo(a)}),h._follow(b)):(h._setBoundTo(b),
h._setFulfilled());return h};a.cast=function(b){b=e(b,void 0);if(!(b instanceof a)){var c=b;b=new a(d);b._setTrace(void 0);b._setFulfilled();b._cleanValues();b._settledValue=c}return b};a.resolve=a.fulfilled=a.cast;a.reject=a.rejected=function(b){var e=new a(d);e._setTrace(void 0);I(b);e._cleanValues();e._setRejected();e._settledValue=b;A(b)||e._setCarriedStackTrace(Error(b+""));e._ensurePossibleRejectionHandled();return e};a.onPossiblyUnhandledRejection=function(a){v.possiblyUnhandledRejection="function"===
typeof a?a:void 0};a.onUnhandledRejectionHandled=function(a){F="function"===typeof a?a:void 0};a.longStackTraces=function(){if(g.haveItemsQueued()&&!1===x)throw Error("cannot enable long stack traces after promises have been created");x=v.isSupported()};a.hasLongStackTraces=function(){return x&&v.isSupported()};a.setScheduler=function(a){if("function"!==typeof a)throw new w("fn must be a function");g._schedule=a};a.prototype._then=function(b,e,c,h,f){var k=void 0!==f;f=k?f:new a(d);k||(x&&(k=this._peekContext()===
this._traceParent,f._traceParent=k?this._traceParent:this),f._propagateFrom(this,7));b=this._addCallbacks(b,e,c,f,h);this.isResolved()&&g.invoke(this._queueSettleAt,this,b);return f};a.prototype._length=function(){return this._bitField&262143};a.prototype._isFollowingOrFulfilledOrRejected=function(){return 0<(this._bitField&939524096)};a.prototype._isFollowing=function(){return 536870912===(this._bitField&536870912)};a.prototype._setLength=function(a){this._bitField=this._bitField&-262144|a&262143};
a.prototype._setFulfilled=function(){this._bitField|=268435456};a.prototype._setRejected=function(){this._bitField|=134217728};a.prototype._setFollowing=function(){this._bitField|=536870912};a.prototype._setIsFinal=function(){this._bitField|=33554432};a.prototype._isFinal=function(){return 0<(this._bitField&33554432)};a.prototype._cancellable=function(){return 0<(this._bitField&67108864)};a.prototype._setCancellable=function(){this._bitField|=67108864};a.prototype._unsetCancellable=function(){this._bitField&=
-67108865};a.prototype._setRejectionIsUnhandled=function(){this._bitField|=2097152};a.prototype._unsetRejectionIsUnhandled=function(){this._bitField&=-2097153;this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())};a.prototype._isRejectionUnhandled=function(){return 0<(this._bitField&2097152)};a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField|=524288};a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField&=
-524289};a.prototype._isUnhandledRejectionNotified=function(){return 0<(this._bitField&524288)};a.prototype._setCarriedStackTrace=function(a){this._bitField|=1048576;this._fulfillmentHandler0=a};a.prototype._unsetCarriedStackTrace=function(){this._bitField&=-1048577;this._fulfillmentHandler0=void 0};a.prototype._isCarryingStackTrace=function(){return 0<(this._bitField&1048576)};a.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0};a.prototype._receiverAt=
function(a){a=0===a?this._receiver0:this[(a<<2)+a-5+4];return this._isBound()&&void 0===a?this._boundTo:a};a.prototype._promiseAt=function(a){return 0===a?this._promise0:this[(a<<2)+a-5+3]};a.prototype._fulfillmentHandlerAt=function(a){return 0===a?this._fulfillmentHandler0:this[(a<<2)+a-5+0]};a.prototype._rejectionHandlerAt=function(a){return 0===a?this._rejectionHandler0:this[(a<<2)+a-5+1]};a.prototype._addCallbacks=function(a,b,d,e,c){var h=this._length();262138<=h&&(h=0,this._setLength(0));if(0===
h)this._promise0=e,void 0!==c&&(this._receiver0=c),"function"!==typeof a||this._isCarryingStackTrace()||(this._fulfillmentHandler0=a),"function"===typeof b&&(this._rejectionHandler0=b),"function"===typeof d&&(this._progressHandler0=d);else{var f=5*h-5;this[f+3]=e;this[f+4]=c;"function"===typeof a&&(this[f+0]=a);"function"===typeof b&&(this[f+1]=b);"function"===typeof d&&(this[f+2]=d)}this._setLength(h+1);return h};a.prototype._setProxyHandlers=function(a,b){var d=this._length();262138<=d&&(d=0,this._setLength(0));
if(0===d)this._promise0=b,this._receiver0=a;else{var e=5*d-5;this[e+3]=b;this[e+4]=a}this._setLength(d+1)};a.prototype._proxyPromiseArray=function(a,b){this._setProxyHandlers(a,b)};a.prototype._proxyPromise=function(a){a._setProxied();this._setProxyHandlers(a,-15)};a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField|=8388608,this._boundTo=a):this._bitField&=-8388609};a.prototype._isBound=function(){return 8388608===(this._bitField&8388608)};a.prototype._resolveFromResolver=function(a){var b=
this;this._setTrace(void 0);this._pushContext();a=G(a,void 0,function(a){b._tryFollow(a)||b._fulfill(a)},function(a){var d=A(a)?a:Error(a+"");b._attachExtraTrace(d);I(a);b._reject(a,d===a?void 0:d)});this._popContext();if(void 0!==a&&a===q){a=a.e;var d=A(a)?a:Error(a+"");b._reject(a,d)}};a.prototype._spreadSlowCase=function(a,d,e,c){e=(new t(e)).promise()._then(function(){return a.apply(c,arguments)},void 0,void 0,b,void 0);d._follow(e)};a.prototype._callSpread=function(b,d,c){var h=this._boundTo;
if(n(c))for(var f=0,k=c.length;f<k;++f)if(e(c[f],void 0)instanceof a){this._spreadSlowCase(b,d,c,h);return}d._pushContext();return E(b,c,h)};a.prototype._callHandler=function(a,d,e,c){d!==b||this.isRejected()?(e._pushContext(),a=y(a,d,c)):a=this._callSpread(a,e,c);e._popContext();return a};a.prototype._settlePromiseFromHandler=function(b,d,c,h){h instanceof a?h.isResolved()||(b=this._callHandler(b,d,h,c),h._isFollowing()||(b===q||b===h||b===u?(c=b===h?l():b.e,d=A(c)?c:Error(c+""),b!==u&&h._attachExtraTrace(d),
h._rejectUnchecked(c,d)):(c=e(b,h),c instanceof a?(!c.isRejected()||c._isCarryingStackTrace()||A(c._settledValue)||(d=Error(c._settledValue+""),h._attachExtraTrace(d),c._setCarriedStackTrace(d)),h._follow(c),h._propagateFrom(c,1)):h._fulfillUnchecked(b)))):b.call(d,c,h)};a.prototype._follow=function(a){this._setFollowing();a.isPending()?(this._propagateFrom(a,1),a._proxyPromise(this)):a.isFulfilled()?this._fulfillUnchecked(a._settledValue):this._rejectUnchecked(a._settledValue,a._getCarriedStackTrace());
a._isRejectionUnhandled()&&a._unsetRejectionIsUnhandled();x&&null==a._traceParent&&(a._traceParent=this)};a.prototype._tryFollow=function(b){if(this._isFollowingOrFulfilledOrRejected()||b===this)return!1;b=e(b,void 0);if(!(b instanceof a))return!1;this._follow(b);return!0};a.prototype._resetTrace=function(){x&&(this._trace=new v(void 0===this._peekContext()))};a.prototype._setTrace=function(a){if(x){var b=this._peekContext();this._traceParent=b;this._trace=void 0!==a&&a._traceParent===b?a._trace:
new v(void 0===b)}return this};a.prototype._attachExtraTrace=function(a){if(x&&A(a)){var b=this,d=a.stack,d="string"===typeof d?d.split("\n"):[];v.protectErrorMessageNewlines(d);for(var e=1;null!=b&&null!=b._trace;)d=v.combine(d,b._trace.stack.split("\n")),b=b._traceParent,e++;b=((Error.stackTraceLimit||10)+1)*e;e=d.length;e>b&&(d.length=b);0<e&&(d[0]=d[0].split("\u0002\x00\u0001").join("\n"));a.stack=1>=d.length?"(No stack trace)":d.join("\n")}};a.prototype._cleanValues=function(){this._cancellable()&&
(this._cancellationParent=void 0)};a.prototype._propagateFrom=function(a,b){0<(b&1)&&a._cancellable()&&(this._setCancellable(),this._cancellationParent=a);0<(b&4)&&this._setBoundTo(a._boundTo);0<(b&2)&&this._setTrace(a)};a.prototype._fulfill=function(a){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(a)};a.prototype._reject=function(a,b){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(a,b)};a.prototype._settlePromiseAt=function(b){var d=this.isFulfilled()?this._fulfillmentHandlerAt(b):
this._rejectionHandlerAt(b),e=this._settledValue,c=this._receiverAt(b),h=this._promiseAt(b);if("function"===typeof d)this._settlePromiseFromHandler(d,c,e,h);else{var d=!1,f=this.isFulfilled();void 0!==c&&(c instanceof a&&c._isProxied()?(c._unsetProxied(),f?c._fulfillUnchecked(e):c._rejectUnchecked(e,this._getCarriedStackTrace()),d=!0):c instanceof t&&(f?c._promiseFulfilled(e,h):c._promiseRejected(e,h),d=!0));d||(f?h._fulfill(e):h._reject(e,this._getCarriedStackTrace()))}this._clearHandlersAtIndex(b);
4<=b&&this._queueGC()};a.prototype._clearHandlersAtIndex=function(a){0===a?this._receiver0=this._progressHandler0=this._rejectionHandler0=this._fulfillmentHandler0=void 0:(a=5*a-5,this[a+4]=this[a+0]=this[a+1]=this[a+2]=void 0)};a.prototype._isProxied=function(){return 4194304===(this._bitField&4194304)};a.prototype._setProxied=function(){this._bitField|=4194304};a.prototype._unsetProxied=function(){this._bitField&=-4194305};a.prototype._isGcQueued=function(){return-1073741824===(this._bitField&-1073741824)};
a.prototype._setGcQueued=function(){this._bitField|=-1073741824};a.prototype._unsetGcQueued=function(){this._bitField&=1073741823};a.prototype._queueGC=function(){this._isGcQueued()||(this._setGcQueued(),g.invokeLater(this._gc,this,void 0))};a.prototype._gc=function(){var a=5*this._length()-5;this._promise0=void 0;for(var b=0;b<a;b++)delete this[b];this._setLength(0);this._unsetGcQueued()};a.prototype._queueSettleAt=function(a){this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled();g.invoke(this._settlePromiseAt,
this,a)};a.prototype._fulfillUnchecked=function(a){if(this.isPending()){if(a===this)return a=l(),this._attachExtraTrace(a),this._rejectUnchecked(a,void 0);this._cleanValues();this._setFulfilled();this._settledValue=a;a=this._length();0<a&&g.invoke(this._settlePromises,this,a)}};a.prototype._rejectUncheckedCheckError=function(a){var b=A(a)?a:Error(a+"");this._rejectUnchecked(a,b===a?void 0:b)};a.prototype._rejectUnchecked=function(a,b){if(this.isPending()){if(a===this){var d=l();this._attachExtraTrace(d);
return this._rejectUnchecked(d)}this._cleanValues();this._setRejected();this._settledValue=a;this._isFinal()?g.invokeLater(function(a){"stack"in a&&g.invokeFirst(v.unhandledRejection,void 0,a);throw a;},void 0,void 0===b?a:b):(d=this._length(),void 0!==b&&this._setCarriedStackTrace(b),0<d?g.invoke(this._rejectPromises,this,null):this._ensurePossibleRejectionHandled())}};a.prototype._rejectPromises=function(){this._settlePromises();this._unsetCarriedStackTrace()};a.prototype._settlePromises=function(){for(var a=
this._length(),b=0;b<a;b++)this._settlePromiseAt(b)};a.prototype._ensurePossibleRejectionHandled=function(){this._setRejectionIsUnhandled();void 0!==v.possiblyUnhandledRejection&&g.invokeLater(this._notifyUnhandledRejection,this,void 0)};a.prototype._notifyUnhandledRejectionIsHandled=function(){"function"===typeof F&&g.invokeLater(F,void 0,this)};a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._settledValue,b=this._getCarriedStackTrace();this._setUnhandledRejectionIsNotified();
void 0!==b&&(this._unsetCarriedStackTrace(),a=b);"function"===typeof v.possiblyUnhandledRejection&&v.possiblyUnhandledRejection(a,this)}};var D=[];a.prototype._peekContext=function(){var a=D.length-1;if(0<=a)return D[a]};a.prototype._pushContext=function(){x&&D.push(this)};a.prototype._popContext=function(){x&&D.pop()};a.prototype._resolveFromSyncValue=function(b){if(b===q)this._cleanValues(),this._setRejected(),this._settledValue=b=b.e,this._attachExtraTrace(b),this._ensurePossibleRejectionHandled();
else{var d=e(b,void 0);d instanceof a?this._follow(d):(this._cleanValues(),this._setFulfilled(),this._settledValue=b)}};v.isSupported()||(a.longStackTraces=function(){},x=!1);a._makeSelfResolutionError=l;c("./finally.js")(a,u,e);c("./direct_resolve.js")(a);c("./synchronous_inspection.js")(a);c("./join.js")(a,t,e,d);a.RangeError=J;a.CancellationError=z;a.TimeoutError=K;a.TypeError=w;a.OperationalError=H;a.RejectionError=H;a.AggregateError=k.AggregateError;p.toFastProperties(a);p.toFastProperties(a.prototype);
a.Promise=a;v.setBounds(g.firstLineError,p.lastLineError);c("./timers.js")(a,d,e);c("./race.js")(a,d,e);c("./call_get.js")(a);c("./generators.js")(a,B,d,e);c("./map.js")(a,t,B,e,d);c("./nodeify.js")(a);c("./promisify.js")(a,d);c("./props.js")(a,t,e);c("./reduce.js")(a,t,B,e,d);c("./settle.js")(a,t);c("./some.js")(a,t,B);c("./progress.js")(a,t);c("./cancel.js")(a,d);c("./filter.js")(a,d);c("./any.js")(a,t);c("./each.js")(a,d);c("./using.js")(a,B,e);a.prototype=a.prototype;return a}},{"./any.js":1,
"./async.js":2,"./call_get.js":4,"./cancel.js":5,"./captured_trace.js":6,"./catch_filter.js":7,"./direct_resolve.js":8,"./each.js":9,"./errors.js":10,"./errors_api_rejection":11,"./filter.js":13,"./finally.js":14,"./generators.js":15,"./join.js":16,"./map.js":17,"./nodeify.js":18,"./progress.js":19,"./promise_array.js":21,"./promise_resolver.js":22,"./promisify.js":23,"./props.js":24,"./race.js":26,"./reduce.js":27,"./settle.js":29,"./some.js":30,"./synchronous_inspection.js":31,"./thenables.js":32,
"./timers.js":33,"./using.js":34,"./util.js":35}],21:[function(c,n,q){n.exports=function(a,l,m){function f(a){switch(a){case -2:return[];case -3:return{}}}function p(d){var b=this._promise=new a(l),c;d instanceof a&&(c=d,b._propagateFrom(c,5));b._setTrace(c);this._values=d;this._totalResolved=this._length=0;this._init(void 0,-2)}var g=c("./errors.js").canAttachTrace,k=c("./util.js").isArray;p.prototype.length=function(){return this._length};p.prototype.promise=function(){return this._promise};p.prototype._init=
function b(c,e){var g=m(this._values,void 0);if(g instanceof a)if(this._values=g,g._setBoundTo(this._promise._boundTo),g.isFulfilled()){if(g=g._settledValue,!k(g)){g=new a.TypeError("expecting an array, a promise or a thenable");this.__hardReject__(g);return}}else{g.isPending()?g._then(b,this._reject,void 0,this,e):(g._unsetRejectionIsUnhandled(),this._reject(g._settledValue));return}else if(!k(g)){g=new a.TypeError("expecting an array, a promise or a thenable");this.__hardReject__(g);return}if(0===
g.length)-5===e?this._resolveEmptyArray():this._resolve(f(e));else{var l=this.getActualLength(g.length);this._length=l;this._values=this.shouldCopyValues()?Array(l):this._values;for(var h=0;h<l&&!this._isResolved();++h){var r=m(g[h],void 0);r instanceof a?r.isPending()?r._proxyPromiseArray(this,h):r.isFulfilled()?this._promiseFulfilled(r._settledValue,h):(r._unsetRejectionIsUnhandled(),this._promiseRejected(r._settledValue,h)):this._promiseFulfilled(r,h)}}};p.prototype._isResolved=function(){return null===
this._values};p.prototype._resolve=function(a){this._values=null;this._promise._fulfill(a)};p.prototype.__hardReject__=p.prototype._reject=function(a){this._values=null;var c=g(a)?a:Error(a+"");this._promise._attachExtraTrace(c);this._promise._reject(a,c)};p.prototype._promiseProgressed=function(a,c){this._isResolved()||this._promise._progress({index:c,value:a})};p.prototype._promiseFulfilled=function(a,c){this._isResolved()||(this._values[c]=a,++this._totalResolved>=this._length&&this._resolve(this._values))};
p.prototype._promiseRejected=function(a,c){this._isResolved()||(this._totalResolved++,this._reject(a))};p.prototype.shouldCopyValues=function(){return!0};p.prototype.getActualLength=function(a){return a};return p}},{"./errors.js":10,"./util.js":35}],22:[function(c,n,q){function a(a){return function(d,c){if(null!==a){if(d){var f=l(d),f=f instanceof Error&&k.getPrototypeOf(f)===Error.prototype?new p(f):f;m.markAsOriginatingFromRejection(f);a._attachExtraTrace(f);a._reject(f)}else if(2<arguments.length){for(var f=
arguments.length,g=Array(f-1),h=1;h<f;++h)g[h-1]=arguments[h];a._fulfill(g)}else a._fulfill(c);a=null}}}q=c("./util.js");var l=q.maybeWrapAsError,m=c("./errors.js"),f=m.TimeoutError,p=m.OperationalError,g=c("./async.js");q=q.haveGetters;var k=c("./es5.js"),d;d=q?function(a){this.promise=a}:function(b){this.promise=b;this.callback=this.asCallback=a(b)};q&&(c={get:function(){return a(this.promise)}},k.defineProperty(d.prototype,"asCallback",c),k.defineProperty(d.prototype,"callback",c));d._nodebackForPromise=
a;d.prototype.toString=function(){return"[object PromiseResolver]"};d.prototype.resolve=d.prototype.fulfill=function(a){if(!(this instanceof d))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");var c=this.promise;c._tryFollow(a)||g.invoke(c._fulfill,c,a)};d.prototype.reject=function(a){if(!(this instanceof d))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");
var c=this.promise;m.markAsOriginatingFromRejection(a);var e=m.canAttachTrace(a)?a:Error(a+"");c._attachExtraTrace(e);g.invoke(c._reject,c,a);e!==a&&g.invoke(this._setCarriedStackTrace,this,e)};d.prototype.progress=function(a){if(!(this instanceof d))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.");g.invoke(this.promise._progress,this.promise,a)};d.prototype.cancel=function(){g.invoke(this.promise.cancel,
this.promise,void 0)};d.prototype.timeout=function(){this.reject(new f("timeout"))};d.prototype.isResolved=function(){return this.promise.isResolved()};d.prototype.toJSON=function(){return this.promise.toJSON()};d.prototype._setCarriedStackTrace=function(a){this.promise.isRejected()&&this.promise._setCarriedStackTrace(a)};n.exports=d},{"./async.js":2,"./errors.js":10,"./es5.js":12,"./util.js":35}],23:[function(c,n,q){n.exports=function(a,l){function m(a){try{return!0===a.__isPromisified__}catch(b){return!1}}
function f(a){for(var b=[a],d=Math.max(0,a-1-5),c=a-1;c>=d;--c)c!==a&&b.push(c);for(c=a+1;5>=c;++c)b.push(c);return b}function p(a){return u.isIdentifier(a)?"."+a:"['"+a.replace(/(['\\])/g,"\\$1")+"']"}function g(d,c,h,k,g){k=Math.max(0,("number"===typeof k.length?Math.max(Math.min(k.length,1024),0):0)-1);var m=f(k);h="string"===typeof h&&u.isIdentifier(h)?h+g:"promisified";return(new Function("Promise","callback","receiver","withAppended","maybeWrapAsError","nodebackForPromise","INTERNAL","                                         \n        var ret = function (Parameters) {                        \n            'use strict';                                                    \n            var len = arguments.length;                                      \n            var promise = new Promise(INTERNAL);                             \n            promise._setTrace(undefined);                                    \n            var fn = nodebackForPromise(promise);                            \n            try {                                                            \n                switch(len) {                                                \n                    [CodeForSwitchCase]                                      \n                }                                                            \n            } catch (e) {                                                    \n                var wrapped = maybeWrapAsError(e);                           \n                promise._attachExtraTrace(wrapped);                          \n                promise._reject(wrapped);                                    \n            }                                                                \n            return promise;                                                  \n        };                                                                   \n        ret.__isPromisified__ = true;                                        \n        return ret;                                                          \n        ".replace("FunctionName",
h).replace("Parameters",u.filledRange(k,"_arg","")).replace("[CodeForSwitchCase]",function(){for(var a="",e=0;e<m.length;++e){var h="case "+m[e]+":",f,k=m[e];f=u.filledRange(k,"arguments[","]").join(", ");var k=0<k?", ":"",g=void 0,g="string"===typeof d?"                                                          \n                this.method({{args}}, fn);                                   \n                break;                                                       \n            ".replace(".method",
p(d)):c===b?"                                                         \n                callback.call(this, {{args}}, fn);                           \n                break;                                                       \n            ":void 0!==c?"                                                         \n                callback.call(receiver, {{args}}, fn);                       \n                break;                                                       \n            ":"                                                         \n                callback({{args}}, fn);                                      \n                break;                                                       \n            ";
f=g.replace("{{args}}",f).replace(", ",k);a+=h+f}e="string"===typeof d?"                                                  \n                this.property.apply(this, args);                             \n            ".replace(".property",p(d)):c===b?"                                                  \n                callback.apply(this, args);                                  \n            ":"                                                  \n                callback.apply(receiver, args);                              \n            ";
return a+="                                                             \n        default:                                                             \n            var args = new Array(len + 1);                                   \n            var i = 0;                                                       \n            for (var i = 0; i < len; ++i) {                                  \n               args[i] = arguments[i];                                       \n            }                                                                \n            args[i] = fn;                                                    \n            [CodeForCall]                                                    \n            break;                                                           \n        ".replace("[CodeForCall]",
e)}())))(a,d,c,t,v,e,l)}function k(d,c){function h(){var f=c;c===b&&(f=this);"string"===typeof d&&(d=f[d]);var k=new a(l);k._setTrace(void 0);var g=e(k);try{d.apply(f,t(arguments,g))}catch(m){f=v(m),k._attachExtraTrace(f),k._reject(f)}return k}h.__isPromisified__=!0;return h}function d(a,d,c,e){for(var h=new RegExp(d.replace(/([$])/,"\\$")+"$"),f=u.inheritedDataKeys(a),k=[],g=0;g<f.length;++g){var l=f[g],t=a[l],p;(p="function"!==typeof t||m(t))||(p=(p=u.getDataPropertyOrDefault(a,l+d,q))?m(p):!1);
p||!c(l,t,a)||k.push(l,t)}for(c=0;c<k.length;c+=2)if(f=k[c],h.test(f))for(f=f.replace(h,""),g=0;g<k.length;g+=2)if(k[g]===f)throw new r("Cannot promisify an API that has normal methods with '"+d+"'-suffix");h=0;for(c=k.length;h<c;h+=2)f=k[h],g=k[h+1],a[f+d]=e===y?y(f,b,f,g,d):e(g);u.toFastProperties(a);return a}var b={},u=c("./util.js"),e=c("./promise_resolver.js")._nodebackForPromise,t=u.withAppended,v=u.maybeWrapAsError,h=u.canEvaluate,r=c("./errors").TypeError,n=function(a,b){return u.isIdentifier(a)&&
"_"!==a.charAt(0)&&!u.isClass(b)},q={__isPromisified__:!0},y=h?g:k;a.promisify=function(a,d){if("function"!==typeof a)throw new r("fn must be a function");return m(a)?a:y(a,2>arguments.length?b:d,void 0,a)};a.promisifyAll=function(a,b){if("function"!==typeof a&&"object"!==typeof a)throw new r("the target of promisifyAll must be an object or a function");b=Object(b);var c=b.suffix;"string"!==typeof c&&(c="Async");var e=b.filter;"function"!==typeof e&&(e=n);var h=b.promisifier;"function"!==typeof h&&
(h=y);if(!u.isIdentifier(c))throw new RangeError("suffix must be a valid identifier");for(var f=u.inheritedDataKeys(a,{includeHidden:!0}),k=0;k<f.length;++k){var g=a[f[k]];"constructor"!==f[k]&&u.isClass(g)&&(d(g.prototype,c,e,h),d(g,c,e,h))}return d(a,c,e,h)}}},{"./errors":10,"./promise_resolver.js":22,"./util.js":35}],24:[function(c,n,q){n.exports=function(a,l,m){function f(a){for(var d=b.keys(a),c=d.length,f=Array(2*c),h=0;h<c;++h){var k=d[h];f[h]=a[k];f[h+c]=k}this.constructor$(f)}function p(b){var c=
m(b,void 0);if(d(c))b=c instanceof a?c._then(a.props,void 0,void 0,void 0,void 0):(new f(c)).promise();else return k("cannot await properties of a non-object");c instanceof a&&b._propagateFrom(c,4);return b}var g=c("./util.js"),k=c("./errors_api_rejection")(a),d=g.isObject,b=c("./es5.js");g.inherits(f,l);f.prototype._init=function(){this._init$(void 0,-3)};f.prototype._promiseFulfilled=function(a,b){if(!this._isResolved()&&(this._values[b]=a,++this._totalResolved>=this._length)){for(var d={},c=this.length(),
h=0,f=this.length();h<f;++h)d[this._values[h+c]]=this._values[h];this._resolve(d)}};f.prototype._promiseProgressed=function(a,b){this._isResolved()||this._promise._progress({key:this._values[b+this.length()],value:a})};f.prototype.shouldCopyValues=function(){return!1};f.prototype.getActualLength=function(a){return a>>1};a.prototype.props=function(){return p(this)};a.props=function(a){return p(a)}}},{"./errors_api_rejection":11,"./es5.js":12,"./util.js":35}],25:[function(c,n,q){function a(a,c,l,g,
k){for(var d=0;d<k;++d)l[d+g]=a[d+c]}function l(a){this._capacity=a;this._front=this._length=0;this._makeCapacity()}l.prototype._willBeOverCapacity=function(a){return this._capacity<a};l.prototype._pushOne=function(a){var c=this.length();this._checkCapacity(c+1);this[this._front+c&this._capacity-1]=a;this._length=c+1};l.prototype._unshiftOne=function(a){var c=this._capacity;this._checkCapacity(this.length()+1);c=(this._front-1&c-1^c)-c;this[c]=a;this._front=c;this._length=this.length()+1};l.prototype.unshift=
function(a,c,l){this._unshiftOne(l);this._unshiftOne(c);this._unshiftOne(a)};l.prototype.push=function(a,c,l){var g=this.length()+3;if(this._willBeOverCapacity(g))this._pushOne(a),this._pushOne(c),this._pushOne(l);else{var k=this._front+g-3;this._checkCapacity(g);var d=this._capacity-1;this[k+0&d]=a;this[k+1&d]=c;this[k+2&d]=l;this._length=g}};l.prototype.shift=function(){var a=this._front,c=this[a];this[a]=void 0;this._front=a+1&this._capacity-1;this._length--;return c};l.prototype.length=function(){return this._length};
l.prototype._makeCapacity=function(){for(var a=this._capacity,c=0;c<a;++c)this[c]=void 0};l.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<3)};l.prototype._resizeTo=function(c){var f=this._front,l=this._capacity,g=Array(l),k=this.length();a(this,0,g,0,l);this._capacity=c;this._makeCapacity();this._front=0;f+k<=l?a(g,f,this,0,k):(c=k-(f+k&l-1),a(g,f,this,0,c),a(g,0,this,c,k-c))};n.exports=l},{}],26:[function(c,n,q){n.exports=function(a,l,m){function f(b,c){var e=
m(b,void 0);if(e instanceof a)return k(e);if(!g(b))return p("expecting an array, a promise or a thenable");e=new a(l);void 0!==c?e._propagateFrom(c,7):e._setTrace(void 0);for(var f=e._fulfill,v=e._reject,h=0,r=b.length;h<r;++h){var n=b[h];(void 0!==n||d.call(b,h))&&a.cast(n)._then(f,v,void 0,e,null)}return e}var p=c("./errors_api_rejection.js")(a),g=c("./util.js").isArray,k=function(a){return a.then(function(c){return f(c,a)})},d={}.hasOwnProperty;a.race=function(a){return f(a,void 0)};a.prototype.race=
function(){return f(this,void 0)}}},{"./errors_api_rejection.js":11,"./util.js":35}],27:[function(c,n,q){n.exports=function(a,l,m,f,p){function g(b,c,d,e){this.constructor$(b);this._preservedValues=e===p?[]:null;this._zerothIsAccum=void 0===d;this._gotAccum=!1;this._reducingIndex=this._zerothIsAccum?1:0;this._valuesPhase=void 0;b=f(d,void 0);e=!1;var k=b instanceof a;k&&(b.isPending()?b._proxyPromiseArray(this,-1):b.isFulfilled()?(d=b._settledValue,this._gotAccum=!0):(b._unsetRejectionIsUnhandled(),
this._reject(b.reason()),e=!0));k||this._zerothIsAccum||(this._gotAccum=!0);this._callback=c;this._accum=d;e||this._init$(void 0,-5)}function k(a,b,c,d){return"function"!==typeof b?m("fn must be a function"):(new g(a,b,c,d)).promise()}var d=c("./util.js"),b=d.tryCatch4,u=d.tryCatch3,e=d.errorObj;d.inherits(g,l);g.prototype._init=function(){};g.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)};g.prototype._promiseFulfilled=
function(c,d){var h=this._values;if(null!==h){h[d]=c;var k=this.length(),g=this._preservedValues,l=null!==g,m=this._gotAccum,p=this._valuesPhase,n;if(!p)for(p=this._valuesPhase=Array(k),n=0;n<k;++n)p[n]=0;n=p[d];0===d&&this._zerothIsAccum?(m||(this._accum=c,this._gotAccum=m=!0),p[d]=0===n?1:2):-1===d?m||(this._accum=c,this._gotAccum=m=!0):0===n?p[d]=1:(p[d]=2,m&&(this._accum=c));if(m){for(var m=this._callback,q=this._promise._boundTo,w=this._reducingIndex;w<k;++w)if(n=p[w],2===n)this._reducingIndex=
w+1;else{if(1!==n)return;c=h[w];if(c instanceof a)if(c.isFulfilled())c=c._settledValue;else{if(c.isPending())return;c._unsetRejectionIsUnhandled();return this._reject(c.reason())}l?(g.push(c),n=u(m,q,c,w,k)):n=b(m,q,this._accum,c,w,k);if(n===e)return this._reject(n.e);var z=f(n,void 0);if(z instanceof a){if(z.isPending())return p[w]=4,z._proxyPromiseArray(this,w);if(z.isFulfilled())n=z._settledValue;else return z._unsetRejectionIsUnhandled(),this._reject(z._settledValue)}this._reducingIndex=w+1;this._accum=
n}this._reducingIndex<k||this._resolve(l?g:this._accum)}}};a.prototype.reduce=function(a,b){return k(this,a,b,null)};a.reduce=function(a,b,c,d){return k(a,b,c,d)}}},{"./util.js":35}],28:[function(c,n,q){var a;if("object"===typeof process&&"string"===typeof process.version)c=function(a){process.nextTick(a)};else if("undefined"!==typeof MutationObserver&&(a=MutationObserver)||"undefined"!==typeof WebKitMutationObserver&&(a=WebKitMutationObserver))c=function(){var c=document.createElement("div"),m;(new a(function(){var a=
m;m=void 0;a()})).observe(c,{attributes:!0});return function(a){m=a;c.classList.toggle("foo")}}();else if("undefined"!==typeof setTimeout)c=function(a){setTimeout(a,0)};else throw Error("no async scheduler available");n.exports=c},{}],29:[function(c,n,q){n.exports=function(a,l){function m(a){this.constructor$(a)}var f=a.PromiseInspection;c("./util.js").inherits(m,l);m.prototype._promiseResolved=function(a,c){this._values[a]=c;++this._totalResolved>=this._length&&this._resolve(this._values)};m.prototype._promiseFulfilled=
function(a,c){if(!this._isResolved()){var k=new f;k._bitField=268435456;k._settledValue=a;this._promiseResolved(c,k)}};m.prototype._promiseRejected=function(a,c){if(!this._isResolved()){var k=new f;k._bitField=134217728;k._settledValue=a;this._promiseResolved(c,k)}};a.settle=function(a){return(new m(a)).promise()};a.prototype.settle=function(){return(new m(this)).promise()}}},{"./util.js":35}],30:[function(c,n,q){n.exports=function(a,l,m){function f(a){this.constructor$(a);this._howMany=0;this._initialized=
this._unwrap=!1}function p(a,b){if((b|0)!==b||0>b)return m("expecting a positive integer");var c=new f(a),d=c.promise();if(d.isRejected())return d;c.setHowMany(b);c.init();return d}var g=c("./util.js"),k=c("./errors.js").RangeError,d=c("./errors.js").AggregateError,b=g.isArray;g.inherits(f,l);f.prototype._init=function(){if(this._initialized)if(0===this._howMany)this._resolve([]);else{this._init$(void 0,-5);var a=b(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}};
f.prototype.init=function(){this._initialized=!0;this._init()};f.prototype.setUnwrap=function(){this._unwrap=!0};f.prototype.howMany=function(){return this._howMany};f.prototype.setHowMany=function(a){this._isResolved()||(this._howMany=a)};f.prototype._promiseFulfilled=function(a){this._isResolved()||(this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values)))};f.prototype._promiseRejected=
function(a){if(!this._isResolved()&&(this._addRejected(a),this.howMany()>this._canPossiblyFulfill())){a=new d;for(var b=this.length();b<this._values.length;++b)a.push(this._values[b]);this._reject(a)}};f.prototype._fulfilled=function(){return this._totalResolved};f.prototype._rejected=function(){return this._values.length-this.length()};f.prototype._addRejected=function(a){this._values.push(a)};f.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a};f.prototype._canPossiblyFulfill=
function(){return this.length()-this._rejected()};f.prototype._getRangeError=function(a){return new k("Input array must contain at least "+this._howMany+" items but contains only "+a+" items")};f.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};a.some=function(a,b){return p(a,b)};a.prototype.some=function(a){return p(this,a)};a._SomePromiseArray=f}},{"./errors.js":10,"./util.js":35}],31:[function(c,n,q){n.exports=function(a){function c(a){void 0!==a?(this._bitField=a._bitField,
this._settledValue=a.isResolved()?a._settledValue:void 0):(this._bitField=0,this._settledValue=void 0)}c.prototype.isFulfilled=a.prototype.isFulfilled=function(){return 0<(this._bitField&268435456)};c.prototype.isRejected=a.prototype.isRejected=function(){return 0<(this._bitField&134217728)};c.prototype.isPending=a.prototype.isPending=function(){return 0===(this._bitField&402653184)};c.prototype.value=a.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise");
return this._settledValue};c.prototype.error=c.prototype.reason=a.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise");return this._settledValue};c.prototype.isResolved=a.prototype.isResolved=function(){return 0<(this._bitField&402653184)};a.PromiseInspection=c}},{}],32:[function(c,n,q){n.exports=function(a,l){function m(b,c,d){function f(c){l||(l=!0,b===c?(c=a._makeSelfResolutionError(),void 0!==d&&d._attachExtraTrace(c),g.promise._reject(c,
void 0)):g.resolve(c))}function k(a){if(!l){l=!0;var b=p(a)?a:Error(a+"");void 0!==d&&d._attachExtraTrace(b);g.promise._reject(a,b)}}function h(a){if(!l){var b=g.promise;"function"===typeof b._progress&&b._progress(a)}}var g=a.defer(),l=!1;try{c.call(b,f,k,h)}catch(m){l||(l=!0,c=p(m)?m:Error(m+""),void 0!==d&&d._attachExtraTrace(c),g.promise._reject(m,c))}return g.promise}var f=c("./util.js"),p=c("./errors.js").canAttachTrace,g=f.errorObj,k=f.isObject,d={}.hasOwnProperty;return function(b,c){if(k(b)){if(b instanceof
a)return b;if(d.call(b,"_promise0")){var e=new a(l);e._setTrace(void 0);b._then(e._fulfillUnchecked,e._rejectUncheckedCheckError,e._progressUnchecked,e,null);e._setFollowing();return e}try{e=b.then}catch(f){g.e=f,e=g}if(e===g)return void 0!==c&&p(e.e)&&c._attachExtraTrace(e.e),a.reject(e.e);if("function"===typeof e)return m(b,e,c)}return b}}},{"./errors.js":10,"./util.js":35}],33:[function(c,n,q){var a=function(a,c){var f=arguments[2],p=arguments[3],g=5<=arguments.length?arguments[4]:void 0;return setTimeout(function(){a(f,
p,g)},c|0)};n.exports=function(l,m,f){function p(a){var b=this;b instanceof Number&&(b=+b);clearTimeout(b);return a}function g(a){var b=this;b instanceof Number&&(b=+b);clearTimeout(b);throw a;}c("./util.js");var k=c("./errors.js");c("./errors_api_rejection")(l);var d=l.TimeoutError,b=function(a,b,c){a.isPending()&&("string"!==typeof b&&(b="operation timed out after "+c+" ms"),b=new d(b),k.markAsOriginatingFromRejection(b),a._attachExtraTrace(b),a._cancel(b))},n=function(a,b){b._fulfill(a)},e=l.delay=
function(b,c){void 0===c&&(c=b,b=void 0);c=+c;var d=f(b,void 0),e=new l(m);if(d instanceof l)return e._propagateFrom(d,7),e._follow(d),e.then(function(a){return l.delay(a,c)});e._setTrace(void 0);a(n,c,b,e);return e};l.prototype.delay=function(a){return e(this,a)};l.prototype.timeout=function(c,d){c=+c;var e=new l(m);e._propagateFrom(this,7);e._follow(this);var f=a(b,c,e,d,c);return e.cancellable()._then(p,g,void 0,f,void 0)}}},{"./errors.js":10,"./errors_api_rejection":11,"./util.js":35}],34:[function(c,
n,q){n.exports=function(a,l,m){function f(b){for(var c=b.length,d=0;d<c;++d){var e=b[d];if(e.isRejected())return a.reject(e.error());b[d]=e._settledValue}return b}function p(a){setTimeout(function(){throw a;},0)}function g(b,c){function d(){if(e>=f)return k.resolve();var g;g=b[e++];var l=m(g,void 0);l!==g&&"function"===typeof g._isDisposable&&"function"===typeof g._getDisposer&&g._isDisposable()&&l._setDisposable(g._getDisposer());g=l;if(g instanceof a&&g._isDisposable()){try{g=m(g._getDisposer().tryDispose(c),
void 0)}catch(n){return p(n)}if(g instanceof a)return g._then(d,p,null,null,null)}d()}var e=0,f=b.length,k=a.defer();d();return k.promise}function k(a){var b=new q;b._settledValue=a;b._bitField=268435456;return g(this,b).thenReturn(a)}function d(a){var b=new q;b._settledValue=a;b._bitField=134217728;return g(this,b).thenThrow(a)}function b(a,b){this._data=a;this._promise=b}function n(a,b){this.constructor$(a,b)}var e=c("./errors.js").TypeError,t=c("./util.js").inherits,q=a.PromiseInspection;b.prototype.data=
function(){return this._data};b.prototype.promise=function(){return this._promise};b.prototype.resource=function(){return this.promise().isFulfilled()?this.promise()._settledValue:null};b.prototype.tryDispose=function(a){var b=this.resource();a=null!==b?this.doDispose(b,a):null;this._promise._unsetDisposable();this._data=this._promise=null;return a};b.isDisposer=function(a){return null!=a&&"function"===typeof a.resource&&"function"===typeof a.tryDispose};t(n,b);n.prototype.doDispose=function(a,b){return this.data().call(a,
a,b)};a.using=function(){var c=arguments.length;if(2>c)return l("you must pass at least 2 arguments to Promise.using");var e=arguments[c-1];if("function"!==typeof e)return l("fn must be a function");c--;for(var g=Array(c),m=0;m<c;++m){var n=arguments[m];if(b.isDisposer(n)){var p=n,n=n.promise();n._setDisposable(p)}g[m]=n}return a.settle(g).then(f).spread(e)._then(k,d,void 0,g,void 0)};a.prototype._setDisposable=function(a){this._bitField|=262144;this._disposer=a};a.prototype._isDisposable=function(){return 0<
(this._bitField&262144)};a.prototype._getDisposer=function(){return this._disposer};a.prototype._unsetDisposable=function(){this._bitField&=-262145;this._disposer=void 0};a.prototype.disposer=function(a){if("function"===typeof a)return new n(a,this);throw new e;}}},{"./errors.js":10,"./util.js":35}],35:[function(c,n,q){function a(a){return"string"===typeof a?a:""+a}function l(a){return null==a||!0===a||!1===a||"string"===typeof a||"number"===typeof a}var m=c("./es5.js");c=function(){try{var a={};
m.defineProperty(a,"f",{get:function(){return 3}});return 3===a.f}catch(c){return!1}}();q="undefined"==typeof navigator;var f={e:{}},p=function(){return"string"!==this}.call("string"),g=/^[a-z$_][a-z$_0-9]*$/i;c={isClass:function(a){try{if("function"===typeof a){var c=m.keys(a.prototype);return 0<c.length&&!(1===c.length&&"constructor"===c[0])}return!1}catch(b){return!1}},isIdentifier:function(a){return g.test(a)},inheritedDataKeys:function(){return m.isES5?function(a,c){for(var b=[],f=Object.create(null),
e=Object(c).includeHidden?Object.getOwnPropertyNames:Object.keys;null!=a;){var g;try{g=e(a)}catch(l){break}for(var h=0;h<g.length;++h){var n=g[h];if(!f[n]){f[n]=!0;var p=Object.getOwnPropertyDescriptor(a,n);null!=p&&null==p.get&&null==p.set&&b.push(n)}}a=m.getPrototypeOf(a)}return b}:function(a){var c=[],b;for(b in a)c.push(b);return c}}(),getDataPropertyOrDefault:function(a,c,b){if(m.isES5){if(a=Object.getOwnPropertyDescriptor(a,c),null!=a)return null==a.get&&null==a.set?a.value:b}else return{}.hasOwnProperty.call(a,
c)?a[c]:void 0},thrower:function(a){throw a;},isArray:m.isArray,haveGetters:c,notEnumerableProp:function(a,c,b){if(l(a))return a;m.defineProperty(a,c,{value:b,configurable:!0,enumerable:!1,writable:!0});return a},isPrimitive:l,isObject:function(a){return!l(a)},canEvaluate:q,errorObj:f,tryCatch1:function(a,c,b){try{return a.call(c,b)}catch(g){return f.e=g,f}},tryCatch2:function(a,c,b,g){try{return a.call(c,b,g)}catch(e){return f.e=e,f}},tryCatch3:function(a,c,b,g,e){try{return a.call(c,b,g,e)}catch(l){return f.e=
l,f}},tryCatch4:function(a,c,b,g,e,l){try{return a.call(c,b,g,e,l)}catch(m){return f.e=m,f}},tryCatchApply:function(a,c,b){try{return a.apply(b,c)}catch(g){return f.e=g,f}},inherits:function(a,c){function b(){this.constructor=a;this.constructor$=c;for(var b in c.prototype)f.call(c.prototype,b)&&"$"!==b.charAt(b.length-1)&&(this[b+"$"]=c.prototype[b])}var f={}.hasOwnProperty;b.prototype=c.prototype;a.prototype=new b;return a.prototype},withAppended:function(a,c){var b=a.length,f=Array(b+1),e;for(e=
0;e<b;++e)f[e]=a[e];f[e]=c;return f},asString:a,maybeWrapAsError:function(c){return l(c)?Error(a(c)):c},wrapsPrimitiveReceiver:p,toFastProperties:function(a){function c(){}c.prototype=a;return c},filledRange:function(a,c,b){for(var f=Array(a),e=0;e<a;++e)f[e]=c+e+b;return f},lastLineError:Error()};n.exports=c},{"./es5.js":12}]},{},[3])(3)});"undefined"!==typeof window&&null!==window?window.P=window.Promise:"undefined"!==typeof self&&null!==self&&(self.P=self.Promise);
